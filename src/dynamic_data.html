<!DOCTYPE html>
<html>
<head>
	<title></title>
	<script src = "https://www.gstatic.com/charts/loader.js"></script>
	  <script type = "text/javascript">
         google.charts.load('current', {packages: ['corechart','line']});     
      </script>
</head>
<body>
 <div id = "container" style = "width: 550px; height: 400px; margin: 0 auto">
      </div>


      <div id="chart_div"></div>
<span id="myClock"></span>

<script language="JavaScript">
setInterval(function(){document.getElementById("myClock")=(new Date).toLocaleTimeString;},1000);
</script>
      <script language = "JavaScript">
         function drawChart() {
            // Define the chart to be drawn.
            var data = new google.visualization.DataTable();
            data.addColumn('string', 'Month');
            data.addColumn('number', 'Tokyo');
            data.addColumn('number', 'New York');
            data.addColumn('number', 'Berlin');
            data.addColumn('number', 'London');
            data.addRows([
               ['Jan',  7.0, -0.2, -0.9, 3.9],
               ['Feb',  6.9, 0.8, 0.6, 4.2],
               ['Mar',  9.5,  5.7, 3.5, 5.7],
               ['Apr',  14.5, 11.3, 8.4, 8.5],
               ['May',  18.2, 17.0, 13.5, 11.9],
               ['Jun',  21.5, 22.0, 17.0, 15.2],
               
               ['Jul',  25.2, 24.8, 18.6, 17.0],
               ['Aug',  26.5, 24.1, 17.9, 16.6],
               ['Sep',  23.3, 20.1, 14.3, 14.2],
               ['Oct',  18.3, 14.1, 9.0, 10.3],
               ['Nov',  13.9,  8.6, 3.9, 6.6],
               ['Dec',  9.6,  2.5,  1.0, 4.8]
            ]);
               
               //data.addRows(['Jan',13]);
            // Set chart options
            var options = {'title' : 'Average Temperatures of Cities',
               hAxis: {
                  title: 'Month'
               },
               vAxis: {
                  title: 'Temperature'
               },   
               'width':550,
               'height':400	  
}
            // Instantiate and draw the chart.
            var chart = new google.visualization.LineChart(document.getElementById ('container'));
            chart.draw(data, options);
         }
         google.charts.setOnLoadCallback(drawChart);
      </script>


<script type="text/javascript">
	

   function drawChart1() {

   
          
            
 
   var data = new google.visualization.DataTable();
  data.addColumn('string', 'TimeS');
            data.addColumn('number', 'Frequency(Hz)');
            data.addColumn('number', 'Drawal(MW)');
            data.addColumn('number', 'Schedule(MW)');
            data.addColumn('number', 'OD/UD(MW)');
            data.addColumn('number','Load(MW)');

drawChart2();
   setInterval(drawChart2,1000);
      function drawChart2() {

               var xhr = new XMLHttpRequest();
   
    xhr.open('GET', "http://localhost:9091/scadadata/findAll/1", true,"user","password");
    
    xhr.withCredentials = true;
    xhr.send();
    xhr.onreadystatechange = function() {
 if (xhr.readyState == 4 && xhr.status == 200) {
 	 var row=data.getNumberOfRows();
 	 if(row>5)
 	 	data.removeRows(0,row-5);
 	   row=data.getNumberOfRows();
 	 
  var date = new Date();
  var time= date.toLocaleTimeString();
        var response = JSON.parse(xhr.responseText);
       var i;
        console.log(row,response[0],time);
         data.addRows(1);
        data.setCell(row,0,time);
        for(i=1;i<=response.length;i=i+1){
              console.log(row,response[i-1]);
        	data.setCell(row,i,response[i-1].value);
        }

        chart.draw(data, options);
    }
   
}
          
      //Create our data table out of JSON data loaded from server.
     

      // Instantiate and draw our chart, passing in some options.
      var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
      var options = {'title' : 'Average Temperatures of Cities',
               hAxis: {
                  title: 'Time'
               },
               vAxis: {
                  title: 'Value'
               },   
               'width':600,
               'height':600	  
}
     chart.draw(data, options);
    }
    }
    
    google.charts.setOnLoadCallback(drawChart1);
     
</script>

</body>
</html>